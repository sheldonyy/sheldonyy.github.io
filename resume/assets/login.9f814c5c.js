import{_ as w,h as V,u as U,r as v,i as C,l as f,j as F,o as y,c as S,a as l,k as I,b as a,w as h,m as R,p as W,e as M,f as E,n as q,q as B,s as N,E as L,t as Y,g as z,v as T,x as $}from"./index.30f7c01e.js";/* empty css                  */import{p as j,_ as G}from"./getCode.230dd1d2.js";const A={setup(c,o){let b=V();const e=U(),u=v(),m={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:"change"}],passWord:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"change"}]},t=C({name:"",passWord:""}),i=f.getStorageType(),p=v(i==="lstore"),x=r=>{let d="sstore";r&&(d="lstore"),f.setStorageType(d)},_=r=>{o.emit("changeType",r)},n=async r=>{!r||await r.validate(async d=>{if(d)try{const{token:k,uin:g}=await j({phone:t.name,pass_word:t.passWord});f.setLogin({token:k,uin:g}),b.commit("user/getUserUin",g),s("/")}catch(k){console.log(k),R.error("\u767B\u5F55\u5931\u8D25")}})},s=r=>{e.push(r)};return{form:t,rules:m,ruleFormRef:u,automatic:p,changeMatic:x,changeType:_,submit:n,goUrl:s}}},D=c=>(W("data-v-5e3b88a0"),c=c(),M(),c),H={class:"form"},J={class:"head line"},K={class:"type"},O=D(()=>l("div",{class:"type"},[l("span",null,"\u8D26\u53F7\u767B\u5F55")],-1)),P={class:"operation"},Q={class:"operation"},X={class:"line"},Z=E(" \u767B\u5F55 ");function ee(c,o,b,e,u,m){const t=q,i=B,p=N,x=F,_=L;return y(),S("div",H,[l("div",J,[l("div",K,[l("span",{onClick:o[0]||(o[0]=I(n=>e.changeType("phone"),["stop"])),class:"slect"}," \u624B\u673A\u53F7\u7801\u767B\u5F55 ")]),O]),a(p,{ref:"ruleFormRef",model:e.form,rules:e.rules,class:"demo-ruleForm"},{default:h(()=>[a(i,{label:"",prop:"name"},{default:h(()=>[a(t,{modelValue:e.form.name,"onUpdate:modelValue":o[1]||(o[1]=n=>e.form.name=n),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),a(i,{label:"",prop:"passWord"},{default:h(()=>[a(t,{modelValue:e.form.passWord,"onUpdate:modelValue":o[2]||(o[2]=n=>e.form.passWord=n),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),l("div",P,[l("span",{onClick:o[3]||(o[3]=n=>e.goUrl("/register"))},"\u6CE8\u518C"),l("span",{onClick:o[4]||(o[4]=n=>e.goUrl("/password"))},"\u5FD8\u8BB0\u5BC6\u7801?")]),l("div",Q,[a(x,{modelValue:e.automatic,"onUpdate:modelValue":o[5]||(o[5]=n=>e.automatic=n),label:"\u81EA\u52A8\u767B\u5F55",onChange:e.changeMatic},null,8,["modelValue","onChange"])]),l("div",X,[a(_,{class:"submit",type:"primary",onClick:o[6]||(o[6]=n=>e.submit(e.ruleFormRef))},{default:h(()=>[Z]),_:1})])])}var oe=w(A,[["render",ee],["__scopeId","data-v-5e3b88a0"]]);const ce={components:{getCode:G},setup(c,o){let b=V();const e=U(),u=v(),m={phone:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:"change"}],code:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"change"}]},t=C({phone:"",code:""}),i=r=>{o.emit("changeType",r)},p=r=>{t.code=r},x=f.getStorageType(),_=v(x==="lstore");return{form:t,rules:m,ruleFormRef:u,changeType:i,getCode:p,automatic:_,changeMatic:r=>{let d="sstore";r&&(d="lstore"),f.setStorageType(d)},submit:async r=>{!r||await r.validate(async d=>{if(d)try{const{token:k,uin:g}=await j({phone:t.name,pass_word:t.passWord});f.setLogin({token:k,uin:g}),b.commit("user/getUserUin",g),e.push("/")}catch(k){console.log(k),R.error("\u767B\u5F55\u5931\u8D25")}})}}}},re=c=>(W("data-v-5faf4ef0"),c=c(),M(),c),le={class:"form"},te={class:"head line"},ne=re(()=>l("div",{class:"type"},[l("span",null,"\u624B\u673A\u53F7\u7801\u767B\u5F55")],-1)),ae={class:"type"},ie={class:"operation"},se={class:"line"},de=E("\u767B\u5F55");function be(c,o,b,e,u,m){const t=q,i=B,p=G,x=N,_=F,n=L;return y(),S("div",le,[l("div",te,[ne,l("div",ae,[l("span",{onClick:o[0]||(o[0]=I(s=>e.changeType("account"),["stop"])),class:"slect"},"\u8D26\u53F7\u767B\u5F55")])]),a(x,{ref:"ruleFormRef",model:e.form,rules:e.rules,class:"demo-ruleForm"},{default:h(()=>[a(i,{label:"",prop:"phone"},{default:h(()=>[a(t,{modelValue:e.form.phone,"onUpdate:modelValue":o[1]||(o[1]=s=>e.form.phone=s),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),a(i,{label:"",prop:"code"},{default:h(()=>[a(p,{code:e.form.code,phone:e.form.phone,onGetCode:e.getCode},null,8,["code","phone","onGetCode"])]),_:1})]),_:1},8,["model","rules"]),l("div",ie,[a(_,{modelValue:e.automatic,"onUpdate:modelValue":o[2]||(o[2]=s=>e.automatic=s),label:"\u81EA\u52A8\u767B\u5F55",onChange:e.changeMatic},null,8,["modelValue","onChange"])]),l("div",se,[a(n,{class:"submit",type:"primary",onClick:o[3]||(o[3]=s=>e.submit(e.ruleFormRef))},{default:h(()=>[de]),_:1})])])}var he=w(ce,[["render",be],["__scopeId","data-v-5faf4ef0"]]);const pe={components:{account:oe,phone:he},setup(){const c=C({type:"phone"}),o=b=>{c.type=b};return{...Y(c),getType:o}}};function xe(c,o,b,e,u,m){const t=z("account"),i=z("phone");return c.type==="account"?(y(),T(t,{key:0,onChangeType:e.getType},null,8,["onChangeType"])):c.type==="phone"?(y(),T(i,{key:1,onChangeType:e.getType},null,8,["onChangeType"])):$("",!0)}var me=w(pe,[["render",xe]]);export{me as default};
