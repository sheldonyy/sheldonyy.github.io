import{y as m,l as b,z as g,A as x,_ as v,r as s,o as u,v as h,w as k,c as _,B as w,C as y,m as f,n as z}from"./index.30f7c01e.js";const d=m.create({timeout:3e4,withCredentials:!0});d.interceptors.request.use(e=>e,e=>Promise.reject(e));d.interceptors.response.use(({data:e})=>{const{data:r,code:t}=e;return t==r?e:(t==404?alert("\u9875\u9762\u627E\u4E0D\u5230\u4E86"):t==500&&alert("\u5185\u90E8\u670D\u52A1\u5668\u9519\u8BEF"),r)},e=>Promise.reject(e));var c=async({url:e,type:r,data:t,params:o})=>{let l=t||o;const{token:i=!1}=l;if(i){const n=b.getToken();if(!n){g.confirm("\u6B64\u64CD\u4F5C\u9700\u8981\u767B\u5F55,\u662F\u5426\u7EE7\u7EED?","",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning",center:!0}).then(()=>{x.push("/login")});return}l={...l,token:n}}return new Promise(async(n,a)=>{try{const p=await d({url:e,type:r,data:["post","POST"].includes(r)?l:void 0,params:["get","GET"].includes(r)?l:void 0});n(p)}catch(p){a(p)}})};function B(e){return c({url:`/api/${1001}`,method:"post",data:{...e,request_id:`${1001}-${new Date().getTime()}`,action:1001}})}function $(e){return c({url:`/api/${1002}`,method:"post",data:{...e,request_id:`${1002}-${new Date().getTime()}`,action:1002}})}function E(e){return c({url:`/api/${2001}`,method:"post",data:{...e,request_id:`${2001}-${new Date().getTime()}`,action:2001}})}const I={props:["code","phone"],setup(e,r){const t=s(e.code),o=a=>{r.emit("getCode",a),y(()=>{t.value=e.code})};let l=null;const i=s(60);return{inputCode:t,input:o,sendTime:i,getCode:()=>{if(console.log("\u624B\u673A\u53F7\u7801--->",e.phone),!e.phone){f({message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",type:"error"});return}f({message:"\u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F",type:"success"}),l&&clearInterval(l),l=setInterval(()=>{i.value--,i.value<0&&(i.value=60,clearInterval(l))},1e3)}}}},T={key:1};function C(e,r,t,o,l,i){const n=z;return u(),h(n,{value:o.inputCode,autocomplete:"off",onInput:o.input},{suffix:k(()=>[o.sendTime===60?(u(),_("span",{key:0,class:"send",onClick:r[0]||(r[0]=(...a)=>o.getCode&&o.getCode(...a))}," \u83B7\u53D6\u9A8C\u8BC1\u7801 ")):(u(),_("span",T,w(o.sendTime)+"\u79D2\u540E\u53EF\u91CD\u65B0\u53D1\u9001",1))]),_:1},8,["value","onInput"])}var D=v(I,[["render",C]]);export{D as _,E as g,$ as p,B as r};
